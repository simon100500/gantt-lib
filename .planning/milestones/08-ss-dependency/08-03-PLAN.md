---
phase: 08-ss-dependency
plan: 03
type: execute
wave: 3
depends_on: ["08-02"]
files_modified:
  - packages/website/src/app/page.tsx
autonomous: false
requirements: []

must_haves:
  truths:
    - "Demo page shows A→(SS)→B linked task pair in the Construction Project"
    - "Dragging A left/right moves B with it in real-time (cascade preview visible)"
    - "Dragging B left is blocked at A's start date (B cannot go before A)"
    - "Dragging B right increases lag freely (no blocking)"
    - "Resizing A's left edge moves B to preserve lag"
    - "Resizing A's right edge does NOT move B"
    - "SS dependency line renders visually (start-to-start connection points)"
  artifacts:
    - path: "packages/website/src/app/page.tsx"
      provides: "SS demo task pair in Construction Project with visible SS constraints"
  key_links:
    - from: "packages/website/src/app/page.tsx"
      to: "gantt-lib cascade hooks"
      via: "handleCascade → cascadeOverrides → TaskRow overridePosition"
      pattern: "onCascade"
---

<objective>
Add a visible SS dependency demo to the Construction Project demo page so the SS constraint behavior can be manually verified end-to-end.

Purpose: The SS implementation from Plans 01+02 needs a working demo to confirm the behavior visually before shipping. The website already has FS dependency examples; adding an SS pair makes all behaviors observable.
Output: page.tsx with 1-2 new SS-linked tasks added to the Construction Project task list; human verification of all SS drag scenarios.
</objective>

<execution_context>
@C:/Users/Volobuev/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Volobuev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/08-ss-dependency/08-CONTEXT.md
@.planning/phases/08-ss-dependency/08-02-SUMMARY.md
@packages/website/src/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add SS-linked task pair to Construction Project demo</name>
  <files>packages/website/src/app/page.tsx</files>
  <action>
    Read packages/website/src/app/page.tsx to understand the current task data structure
    (Construction Project tasks array with id, name, startDate, endDate, color, dependencies).

    Add 2 tasks to the Construction Project task list that demonstrate SS constraints:
    - Task name: "Site Preparation" (predecessor A) — start 2025-01-06, end 2025-01-12, color '#8b5cf6'
    - Task name: "Foundation Work" (successor B) — start 2025-01-08, end 2025-01-20, color '#6d28d9',
      dependencies: [{ taskId: '<id-of-Site-Preparation>', type: 'SS', lag: 2 }]

    The lag of 2 means Foundation Work starts 2 days after Site Preparation starts.

    Choose IDs that fit the existing scheme (likely incremental or descriptive strings).
    Place the tasks at the end of the task list or in a logical position within the project.

    Ensure the tasks are within the existing date range so they render on the calendar.
    If the existing demo uses a different date range, adjust the SS task dates to be in range.

    After editing, run: npm run dev (or check if already running) then verify no runtime errors
    in the browser console (or run: npm run build --filter packages/website to check SSR).
    Commit: feat(08-03): add SS dependency demo tasks to Construction Project
  </action>
  <verify>
    cd D:/Projects/gantt-lib && npm run build --filter packages/website 2>&1 | tail -20
    No TypeScript or build errors.
    Two new tasks appear in the page.tsx task array with SS dependency.
  </verify>
  <done>
    page.tsx has SS-linked task pair. Build succeeds. Foundation Work has
    dependencies: [{ taskId: '...', type: 'SS', lag: 2 }].
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    SS dependency constraint enforcement wired end-to-end:
    - getSuccessorChain extended with linkTypes parameter (Plan 01)
    - recalculateIncomingLags extended for SS (Plan 01)
    - ActiveDragState split into cascadeChain/cascadeChainFS/cascadeChainSS (Plan 02)
    - Constraint clamp includes SS type (Plan 02)
    - Mode-aware cascade emission: move→FS+SS, resize-right→FS-only, resize-left→SS-only (Plan 02)
    - SS lag floor at 0 in cascade preview (Plan 02)
    - handleComplete dual-delta for resize-left vs resize-right (Plan 02)
    - SS demo tasks added to Construction Project (Plan 03 Task 1)
  </what-built>
  <how-to-verify>
    Run: cd D:/Projects/gantt-lib && npm run dev
    Open: http://localhost:3000

    Locate "Site Preparation" (A) and "Foundation Work" (B) tasks in the Construction Project.
    The SS dependency line should connect them start-to-start.

    Test each scenario (hard mode, disableConstraints=false):

    1. DRAG A RIGHT: Grab Site Preparation bar middle → drag right.
       Expected: Foundation Work moves right with same delta in real-time.
       Confirm: After drop, both tasks' start dates shifted equally.

    2. DRAG A LEFT: Grab Site Preparation bar middle → drag left.
       Expected: Foundation Work moves left. When A's start would go past B's current start,
       they move together as a unit (B stays at A's start, lag = 0).

    3. DRAG B RIGHT: Grab Foundation Work bar middle → drag right.
       Expected: B moves right freely. No blocking. Lag increases.

    4. DRAG B LEFT: Grab Foundation Work bar middle → drag left.
       Expected: B stops when its start date reaches A's start date. Cannot go further left.

    5. RESIZE A RIGHT EDGE: Grab right edge of Site Preparation → drag right/left.
       Expected: Foundation Work does NOT move. Only A's duration changes.

    6. RESIZE A LEFT EDGE: Grab left edge of Site Preparation → drag left/right.
       Expected: Foundation Work moves with A to preserve lag.
       (A's start changes → B follows to keep startB - startA constant.)

    7. RESIZE B LEFT EDGE: Grab left edge of Foundation Work → drag left.
       Expected: B's left edge stops when it would reach A's start date.

    8. RESIZE B RIGHT EDGE: Grab right edge of Foundation Work → drag right/left.
       Expected: No SS constraint effect. Only B's duration changes.
  </how-to-verify>
  <resume-signal>Type "approved" if all 8 scenarios work correctly, or describe any issues found.</resume-signal>
</task>

</tasks>

<verification>
Visual verification via human tester per checkpoint above.
All 8 SS interaction scenarios from CONTEXT.md behavior matrix must work correctly.
</verification>

<success_criteria>
- SS demo tasks visible in Construction Project on demo page
- All 8 SS drag scenarios produce correct behavior
- No JavaScript errors in browser console during any SS interaction
- FS dependency behavior on existing tasks is unchanged (regression check: drag an existing FS-linked task)
</success_criteria>

<output>
After completion, create `.planning/phases/08-ss-dependency/08-03-SUMMARY.md`
</output>
