---
wave: 1
depends_on: []
files_modified:
  - packages/gantt-lib/src/components/TaskList/TaskList.tsx
  - packages/gantt-lib/src/components/TaskList/TaskListRow.tsx
  - packages/gantt-lib/src/components/TaskList/TaskList.css
  - packages/gantt-lib/src/components/TaskList/index.tsx
  - packages/gantt-lib/src/components/GanttChart/GanttChart.tsx
  - packages/gantt-lib/src/components/GanttChart/GanttChart.css
  - packages/gantt-lib/src/index.ts
  - packages/website/src/app/page.tsx
autonomous: true
---

# Phase 12-01: Task List Component - Core Structure and Rendering

## Goal

Create a TaskList overlay component that displays tasks in a table format (№, Name, Start Date, End Date) positioned to the left of the Gantt chart timeline using sticky positioning within the existing scroll container. The overlay will toggle visibility via a prop and display rows that align vertically with task bars on the chart.

## Requirements

None — internal feature extension

## Success Criteria

1. TaskList component renders as an overlay on the left side of the chart when `showTaskList` prop is true
2. Task list rows align vertically with corresponding task bars (same rowHeight)
3. Task list has 4 columns: № (number), Name, Start Date, End Date
4. Dates display in DD.MM.YY format (e.g., 01.03.26)
5. Task list uses position: sticky for synchronized vertical scrolling with the chart
6. Task list background is opaque and fully covers the area beneath it
7. No status icons are shown (only text)
8. Task list styling matches TaskRow component (borders, colors, spacing)

## Tasks

### Task 1: Create TaskList component structure and types

**Action**: Create the TaskList component with TypeScript types and basic rendering structure

**Implementation details**:
- Create `packages/gantt-lib/src/components/TaskList/TaskList.tsx`
- Define `TaskListProps` interface with:
  - `tasks: Task[]` - array of tasks to display
  - `rowHeight: number` - height of each row (must match Gantt chart's rowHeight)
  - `taskListWidth?: number` - optional width of the overlay (default: 300px)
  - `onTaskChange?: (task: Task) => void` - callback when task is modified via inline edit
  - `selectedTaskId?: string` - ID of currently selected task
  - `onTaskSelect?: (taskId: string | null) => void` - callback when task row is clicked
- Create `packages/gantt-lib/src/components/TaskList/index.tsx` exporting TaskList
- Implement basic table header row with column titles (№, Имя, Начало, Окончание)
- Use CSS class prefix `gantt-tl-` for all styles

**Verification**:
- Component file exists at `packages/gantt-lib/src/components/TaskList/TaskList.tsx`
- Export file exists at `packages/gantt-lib/src/components/TaskList/index.tsx`
- TypeScript types compile without errors
- Component renders a table structure with 4 columns

### Task 2: Create TaskListRow component with inline editing

**Action**: Create TaskListRow component with inline editing for name and dates

**Implementation details**:
- Create `packages/gantt-lib/src/components/TaskList/TaskListRow.tsx`
- Define `TaskListRowProps` interface with task data, row index, and callbacks
- Implement inline editing pattern:
  - Click on editable cell (name, dates) → input appears
  - Enter or blur → saves changes
  - Escape → cancels edit and reverts to original value
- Use `useState` for edit mode tracking (`isEditing`, `editValue`)
- Use `useRef` for input auto-focus and text selection on edit mode enter
- Date cells should:
  - Display in DD.MM.YY format using `formatDateLabel` utility
  - Accept input in DD.MM.YY format
  - Validate date format on save using `parseUTCDate`
  - Convert back to YYYY-MM-DD ISO format for task data
- Non-editable cell (№) displays as read-only text
- Apply `gantt-tl-row-selected` class when `selectedTaskId` matches task ID

**Verification**:
- Row component renders 4 cells with correct data
- Clicking editable cells switches to input mode
- Input auto-focuses and selects text on edit mode enter
- Enter key saves changes and exits edit mode
- Escape key cancels edit and reverts value
- Date validation prevents invalid date formats

### Task 3: Create TaskList CSS styles and integrate with GanttChart

**Action**: Create CSS styles for TaskList and integrate overlay into GanttChart

**Implementation details**:
- Create `packages/gantt-lib/src/components/TaskList/TaskList.css` with:
  - `.gantt-tl-overlay` - main container with `position: sticky; left: 0; top: 0;`
  - `.gantt-tl-table` - table structure
  - `.gantt-tl-header` - header row with column titles
  - `.gantt-tl-headerCell` - individual header cells
  - `.gantt-tl-row` - data rows with `height: var(--gantt-row-height, 40px)`
  - `.gantt-tl-row:hover` - hover state matching TaskRow style
  - `.gantt-tl-row-selected` - selected state with blue background
  - `.gantt-tl-cell` - base cell style with padding and border
  - `.gantt-tl-cell-number` - number column (read-only, narrower)
  - `.gantt-tl-cell-name` - name column (editable, wider)
  - `.gantt-tl-cell-date` - date columns (editable)
  - `.gantt-tl-cell input` - inline edit input styling
- Use CSS variables from project theming (`--gantt-grid-line-color`, `--gantt-row-height`, etc.)
- Set overlay `z-index: 5` (above grid: 0, below guide lines: 20)
- Background color: `var(--gantt-cell-background, #ffffff)`
- Right border: `1px solid var(--gantt-grid-line-color, #e0e0e0)`

Modify `packages/gantt-lib/src/components/GanttChart/GanttChart.tsx`:
- Add `showTaskList?: boolean` prop to `GanttChartProps`
- Add `taskListWidth?: number` prop (default: 300)
- Add `selectedTaskId?: string` state for tracking selection
- Add `onTaskSelect` callback to update selection state
- Render TaskList overlay inside `gantt-taskArea` when `showTaskList` is true
- Position overlay with `position: sticky; left: 0; width: taskListWidth`
- Pass `onTaskChange` callback to TaskList for inline edit updates

**Verification**:
- CSS file exists with all required classes and proper prefixing
- TaskList appears as overlay on left side when `showTaskList=true`
- Task list rows align vertically with task bars
- Vertical scrolling is synchronized (no separate scrollbar)
- Task list background is opaque and covers area beneath it
- Overlay z-index is correct (above grid, below guide lines)

## Files Modified

- `packages/gantt-lib/src/components/TaskList/TaskList.tsx` - NEW
- `packages/gantt-lib/src/components/TaskList/TaskListRow.tsx` - NEW
- `packages/gantt-lib/src/components/TaskList/TaskList.css` - NEW
- `packages/gantt-lib/src/components/TaskList/index.tsx` - NEW
- `packages/gantt-lib/src/components/GanttChart/GanttChart.tsx` - MODIFIED (add showTaskList prop and TaskList rendering)
- `packages/gantt-lib/src/components/GanttChart/GanttChart.css` - MODIFIED (import TaskList styles)
- `packages/gantt-lib/src/index.ts` - MODIFIED (export TaskList)
- `packages/website/src/app/page.tsx` - MODIFIED (add demo with TaskList toggle)

## Must Haves

1. TaskList component exists and is exported from library
2. TaskList renders as overlay with 4 columns (№, Name, Start Date, End Date)
3. Task rows align vertically with task bars (same rowHeight)
4. Inline editing works for name and dates (Enter/blur save, Esc cancel)
5. Date validation prevents invalid date formats
6. Task list styling matches TaskRow component style
7. Vertical scroll is synchronized (single scroll container)
8. TaskList can be toggled via `showTaskList` prop
9. Clicking row selects task and highlights it
10. CSS uses `gantt-tl-` prefix and follows project conventions

## Verification Criteria

After executing this plan, the following should be TRUE:

1. [ ] Importing TaskList from 'gantt-lib' works without errors
2. [ ] Passing `showTaskList={true}` to GanttChart shows overlay on left side
3. [ ] Task list has 4 columns with correct headers (№, Имя, Начало, Окончание)
4. [ ] Task list rows align perfectly with task bars (visual inspection)
5. [ ] Scrolling the chart vertically scrolls the task list (no separate scrollbar)
6. [ ] Clicking a task name cell switches to input edit mode
7. [ ] Typing in input and pressing Enter saves the change
8. [ ] Pressing Escape cancels the edit without saving
9. [ ] Clicking outside the input (blur) saves the change
10. [ ] Editing a date and entering invalid format keeps edit mode active (no save)
11. [ ] Clicking a row highlights it with blue background
12. [ ] Task list background is opaque (chart content behind it is not visible)
13. [ ] Task list has right border separating it from chart
14. [ ] Hovering over a row shows hover effect matching TaskRow hover
15. [ ] CSS classes use `gantt-tl-` prefix

## Dependencies

None (first plan of Phase 12)

## Notes

- This plan implements the core TaskList component without integration into the main library index yet (that will be done in the next plan or as part of this plan's final step)
- The overlay approach uses `position: sticky` within the existing scroll container, avoiding complex scroll synchronization logic
- Date format conversion: Display as DD.MM.YY, edit as DD.MM.YY, store as YYYY-MM-DD (ISO)
- Inline editing uses standard React pattern: useState for edit mode, useEffect for auto-focus, onKeyDown for Enter/Esc handling
