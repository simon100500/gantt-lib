---
phase: 04-npm-packaging
plan: 03
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - packages/website/package.json
  - packages/website/tsconfig.json
  - packages/website/next.config.ts
  - packages/website/src/app/layout.tsx
  - packages/website/src/app/page.tsx
  - packages/website/src/app/globals.css
  - packages/website/src/components/Modal/Modal.tsx
  - packages/website/src/components/Modal/Modal.module.css
autonomous: true
requirements: [DX-04]

must_haves:
  truths:
    - "packages/website is a fresh Next.js 15 app with a single clean demo page"
    - "packages/website imports gantt-lib from workspace (not relative path)"
    - "packages/website/src/components/Modal/ holds the Modal component (moved from library)"
    - "packages/website/next.config.ts does NOT include transpilePackages"
    - "packages/website uses react 19 in its own dependencies"
  artifacts:
    - path: "packages/website/package.json"
      provides: "Website npm manifest"
      contains: '"gantt-lib": "*"'
    - path: "packages/website/src/app/page.tsx"
      provides: "Clean demo page importing from gantt-lib"
      contains: "from 'gantt-lib'"
    - path: "packages/website/src/components/Modal/Modal.tsx"
      provides: "Modal component (website-only, not in library)"
  key_links:
    - from: "packages/website/src/app/page.tsx"
      to: "gantt-lib"
      via: "workspace import"
      pattern: "from 'gantt-lib'"
    - from: "packages/website/src/app/layout.tsx"
      to: "gantt-lib/styles.css"
      via: "CSS import"
      pattern: "import 'gantt-lib/styles.css'"
---

<objective>
Create the `packages/website/` demo application as a fresh Next.js 15 app. Move Modal component from library source to website-only. Build a clean demo page importing GanttChart from 'gantt-lib'.

Purpose: Demo site that consumes the library package and proves the installation path works.
Output: packages/website/ with Next.js 15 app, demo page, Modal component moved in, package.json wired to workspace.
</objective>

<execution_context>
@C:/Users/Volobuev/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Volobuev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-npm-packaging/04-CONTEXT.md
@.planning/phases/04-npm-packaging/04-RESEARCH.md
@.planning/phases/04-npm-packaging/04-01-SUMMARY.md
@src/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold packages/website with package.json, tsconfig.json, next.config.ts</name>
  <files>packages/website/package.json, packages/website/tsconfig.json, packages/website/next.config.ts</files>
  <action>
    Create `packages/website/` directory and its config files.

    1. `packages/website/package.json`:
    ```json
    {
      "name": "website",
      "version": "0.0.1",
      "private": true,
      "scripts": {
        "dev": "next dev",
        "build": "next build",
        "start": "next start",
        "lint": "next lint"
      },
      "dependencies": {
        "gantt-lib": "*",
        "next": "^15.1.0",
        "react": "^19.0.0",
        "react-dom": "^19.0.0"
      },
      "devDependencies": {
        "@types/node": "^22.0.0",
        "@types/react": "^19.0.0",
        "@types/react-dom": "^19.0.0",
        "typescript": "^5.7.0"
      }
    }
    ```
    Note: `"gantt-lib": "*"` uses npm workspace resolution — no need for `workspace:*` syntax with npm workspaces.

    2. `packages/website/tsconfig.json`:
    ```json
    {
      "extends": "../../tsconfig.json",
      "compilerOptions": {
        "jsx": "preserve",
        "noEmit": true,
        "incremental": true,
        "plugins": [{ "name": "next" }],
        "paths": {
          "@/*": ["./src/*"]
        }
      },
      "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
      "exclude": ["node_modules"]
    }
    ```

    3. `packages/website/next.config.ts`:
    ```typescript
    import type { NextConfig } from 'next';

    const nextConfig: NextConfig = {
      reactStrictMode: true,
    };

    export default nextConfig;
    ```
    CRITICAL: Do NOT add `transpilePackages: ['gantt-lib']` — per RESEARCH.md this breaks Turbopack. The library ships pre-compiled dist files so no transpilation is needed.
  </action>
  <verify>
    1. Read packages/website/package.json — confirm `"gantt-lib": "*"` in dependencies and `"next": "^15.1.0"`.
    2. Read packages/website/next.config.ts — confirm it does NOT contain `transpilePackages`.
    3. Read packages/website/tsconfig.json — confirm `"extends": "../../tsconfig.json"`.
  </verify>
  <done>packages/website config files created. gantt-lib workspace dependency declared. No transpilePackages in next config.</done>
</task>

<task type="auto">
  <name>Task 2: Create app shell, demo page, and move Modal to website</name>
  <files>
    packages/website/src/app/layout.tsx,
    packages/website/src/app/globals.css,
    packages/website/src/app/page.tsx,
    packages/website/src/components/Modal/Modal.tsx,
    packages/website/src/components/Modal/Modal.module.css
  </files>
  <action>
    1. Create `packages/website/src/app/globals.css` — minimal reset:
    ```css
    *, *::before, *::after {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, sans-serif;
    }
    ```

    2. Create `packages/website/src/app/layout.tsx`:
    ```tsx
    import type { Metadata } from 'next';
    import 'gantt-lib/styles.css';
    import './globals.css';

    export const metadata: Metadata = {
      title: 'Gantt Chart Demo',
      description: 'gantt-lib demo site',
    };

    export default function RootLayout({ children }: { children: React.ReactNode }) {
      return (
        <html lang="en">
          <body>{children}</body>
        </html>
      );
    }
    ```
    The `import 'gantt-lib/styles.css'` line is how consumers load the library CSS — this matches the CONTEXT.md spec.

    3. Create `packages/website/src/app/page.tsx` — a clean demo page that imports from gantt-lib. This is a fresh page (not migrating the old app/page.tsx). It should show the GanttChart with sample multi-month tasks. Model it on the existing `src/app/page.tsx` structure but clean up the performance-test 100-tasks mode to just show a simple working demo:
    ```tsx
    'use client';

    import { useState, useCallback } from 'react';
    import { GanttChart, type Task } from 'gantt-lib';

    const createSampleTasks = (): Task[] => {
      const now = new Date();
      const y = now.getUTCFullYear();
      const m = now.getUTCMonth();
      const next = (m + 1) % 12;
      const nextY = next === 0 ? y + 1 : y;
      const pad = (n: number) => String(n + 1).padStart(2, '0');
      return [
        { id: '1', name: 'Project Kickoff', startDate: `${y}-${pad(m)}-01`, endDate: `${y}-${pad(m)}-03`, color: '#10b981' },
        { id: '2', name: 'Sprint Planning', startDate: `${y}-${pad(m)}-05`, endDate: `${y}-${pad(m)}-12`, color: '#f59e0b' },
        { id: '3', name: 'Development', startDate: `${y}-${pad(m)}-10`, endDate: `${y}-${pad(m)}-25` },
        { id: '4', name: 'Code Review', startDate: `${y}-${pad(m)}-20`, endDate: `${y}-${pad(m)}-28`, color: '#ef4444' },
        { id: '5', name: 'Multi-Month Release', startDate: `${y}-${pad(m)}-25`, endDate: `${nextY}-${pad(next)}-10`, color: '#ec4899' },
        { id: '6', name: 'Documentation', startDate: `${nextY}-${pad(next)}-01`, endDate: `${nextY}-${pad(next)}-20` },
      ];
    };

    export default function Home() {
      const [tasks, setTasks] = useState<Task[]>(createSampleTasks);

      const handleChange = useCallback(
        (updated: Task[] | ((t: Task[]) => Task[])) =>
          setTasks(typeof updated === 'function' ? updated : () => updated),
        []
      );

      return (
        <main style={{ padding: '2rem' }}>
          <h1 style={{ marginBottom: '0.5rem' }}>gantt-lib demo</h1>
          <p style={{ marginBottom: '2rem', color: '#6b7280' }}>
            Drag task bars to move or resize. Install: <code>npm install gantt-lib</code>
          </p>
          <div style={{ border: '1px solid #e5e7eb', borderRadius: '8px', padding: '1rem' }}>
            <GanttChart tasks={tasks} dayWidth={24} rowHeight={36} onChange={handleChange} />
          </div>
        </main>
      );
    }
    ```

    4. Copy (do NOT git mv yet — that's plan 04-04) the Modal files into website-only location. Create:
    - `packages/website/src/components/Modal/Modal.tsx` — copy content from `src/components/Modal/Modal.tsx`
    - `packages/website/src/components/Modal/Modal.module.css` — copy content from `src/components/Modal/Modal.module.css`

    Read the existing Modal files first before copying. The import path inside Modal.tsx may reference types from `../../types` — update it to import from `gantt-lib` instead: `import type { Task } from 'gantt-lib'`.
  </action>
  <verify>
    1. Read packages/website/src/app/page.tsx — confirm `from 'gantt-lib'` import (not relative).
    2. Read packages/website/src/app/layout.tsx — confirm `import 'gantt-lib/styles.css'`.
    3. Read packages/website/src/components/Modal/Modal.tsx — confirm it exists and any Task type import references 'gantt-lib'.
    4. Confirm no `src/components/Modal` references remain in the website page.tsx (the demo page does not use Modal — it's just preserved for future use).
  </verify>
  <done>packages/website/src/app/ has layout.tsx (imports gantt-lib/styles.css), globals.css, and page.tsx (imports GanttChart from 'gantt-lib'). Modal component exists in website-only location with type imports updated to 'gantt-lib'.</done>
</task>

</tasks>

<verification>
1. `ls packages/website/src/app/` — shows layout.tsx, globals.css, page.tsx
2. `ls packages/website/src/components/Modal/` — shows Modal.tsx and Modal.module.css
3. `grep "from 'gantt-lib'" packages/website/src/app/page.tsx` — returns match
4. `grep "gantt-lib/styles.css" packages/website/src/app/layout.tsx` — returns match
5. `grep "transpilePackages" packages/website/next.config.ts` — returns nothing (not present)
</verification>

<success_criteria>
packages/website/ is a complete Next.js 15 app shell with a working demo page structure. It references gantt-lib via workspace import. Modal is in website-only location. No transpilePackages in next config.
</success_criteria>

<output>
After completion, create `.planning/phases/04-npm-packaging/04-03-SUMMARY.md`
</output>
