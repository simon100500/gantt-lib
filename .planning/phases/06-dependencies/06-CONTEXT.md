# Phase 6: Dependencies - Context

**Gathered:** 2026-02-21
**Status:** Ready for planning

## Phase Boundary

Задачи могут иметь зависимости (предшественники), которые определяют порядок их выполнения. Библиотека поддерживает визуализацию зависимостей линиями со стрелками и обеспечивает соблюдение зависимостей при перетаскивании задач. Автоматическое перепланирование включается опционально.

## Implementation Decisions

### Типы связей
- Поддерживаются все 4 типа связей: FS (finish-to-start), SS (start-to-start), FF (finish-to-finish), SF (start-to-finish)
- Лаг (задержка) указывается в целых днях, поддерживаются положительные и отрицательные значения
- У задачи может быть несколько предшественников

### Визуализация
- Зависимости рисуются кривыми Безье со стрелками от конца предшественника к началу последовательника
- Нейтральный цвет (серый/чёрный) для всех линий зависимостей
- При наведении/перетаскивании задачи зависимости НЕ подсвечиваются

### Поведение расписания
- Автоматическое сдвигание зависимых задач происходит только когда включён специальный режим (автопланирование)
- При перемещении задачи блокируется только перемещение, если это нарушит зависимость. Изменение размера не блокируется.
- При удалении зависимости связь удаляется полностью

### API и валидация
- Зависимости задаются внутри объекта задачи: `{ id, name, startDate, endDate, dependencies: [{ taskId, type, lag }] }`
- Тип связи указывается двухбуквенным кодом: 'FS', 'SS', 'FF', 'SF'
- При обнаружении циклической зависимости — визуально подсветить красным (не блокировать рендер)
- Предоставить API для программной проверки зависимостей (массив ошибок/предупреждений)

### Claude's Discretion
- Точный формат API для автопланирования (переключатель)
- Способ визуального подсвечивания циклических зависимостей
- Детали кривых Безье (степень, контрольные точки)
- Размер стрелки на конце линии

## Specific Ideas

Нет особых требований — открыт к стандартным подходам для библиотек Gantt-диаграмм

## Deferred Ideas

Нет — обсуждение осталось в рамках фазы

---

*Phase: 06-dependencies*
*Context gathered: 2026-02-21*
