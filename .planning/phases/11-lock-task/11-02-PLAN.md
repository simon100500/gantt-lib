---
phase: 11-lock-task
plan: 02
type: execute
wave: 2
depends_on:
  - 11-01
files_modified:
  - packages/website/src/app/page.tsx
autonomous: false
requirements:
  - INT-01
  - INT-02

must_haves:
  truths:
    - "Demo page shows at least 2 tasks with locked: true, displaying the padlock icon"
    - "User confirms locked tasks cannot be dragged or resized (cursor shows not-allowed on hover)"
    - "User confirms unlocked tasks in the same chart still drag and resize normally"
    - "User confirms cascading still works: dragging an unlocked predecessor does not move locked successor bars"
  artifacts:
    - path: "packages/website/src/app/page.tsx"
      provides: "Demo tasks with locked: true for human verification"
      contains: "locked: true"
  key_links:
    - from: "packages/website/src/app/page.tsx"
      to: "gantt-lib Task type"
      via: "locked: true on task objects in createSampleTasks"
      pattern: "locked.*true"
---

<objective>
Add locked tasks to the website demo page so the human can visually verify that lock interactions work correctly end-to-end: icon display, cursor feedback, drag prevention, and cascade behavior with locked tasks in the chain.

Purpose: Human verification is required before marking this phase complete — the lock behavior is visual and interactive, not testable by TypeScript alone.
Output: Demo page with locked tasks, human sign-off on behavior.
</objective>

<execution_context>
@C:/Users/Volobuev/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Volobuev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/11-lock-task/11-CONTEXT.md
@packages/website/src/app/page.tsx
@.planning/phases/11-lock-task/11-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add locked tasks to demo page</name>
  <files>packages/website/src/app/page.tsx</files>
  <action>
In `packages/website/src/app/page.tsx`, add `locked: true` to at least 2 tasks in the `createSampleTasks()` function. Choose tasks that cover both scenarios:

**Scenario A — locked standalone task (no dependencies from it):** Add `locked: true` to task id "1" ("Геодезическая разбивка площадки") which already has `progress: 100, accepted: true`. This is the canonical use case: a completed+accepted task that should not be rescheduled.

**Scenario B — locked task that is a SUCCESSOR in a cascade chain:** Add `locked: true` to task id "4" ("Разработка котлована") which has an FS dependency on task "2". This tests that when task "2" is dragged, the cascade preview does NOT move task "4" (it skips it but continues to task "4"'s own successors if any).

Changes: add `locked: true` to the task objects for id "1" and id "4" in the tasks array returned by `createSampleTasks()`.

Do not add locked to all tasks — leave most unlocked so the user can verify normal drag still works.
  </action>
  <verify>
Run the dev server and open the page:
```bash
cd D:/Projects/gantt-lib && npm run dev --workspace=packages/website
```
Open http://localhost:3000 in browser. Confirm the page loads without errors and the Gantt chart renders.
  </verify>
  <done>
- page.tsx has `locked: true` on tasks "1" and "4"
- Dev server starts without errors
- Page renders the Gantt chart
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete lock-task feature:
- locked?: boolean added to Task type (both interfaces)
- useTaskDrag blocks all interaction when locked (early return in handleMouseDown)
- Cursor shows not-allowed on hover over locked task bars
- Inline SVG padlock icon renders before the date-range text on locked task bars
- Locked tasks are skipped in cascade preview overrides (do not visually move during predecessor drag)
- Locked tasks excluded from onCascade output (dates unchanged)
- Demo: tasks "1" (Геодезическая разбивка площадки) and "4" (Разработка котлована) are locked
  </what-built>
  <how-to-verify>
Open http://localhost:3000 and verify:

1. **Lock icon visible:** Tasks "Геодезическая разбивка площадки" and "Разработка котлована" show a small padlock icon on the left side of their task bars (before the duration text)

2. **Cursor feedback:** Hover over a locked task bar — cursor should show `not-allowed` (circle with diagonal line). Hover over an unlocked task — cursor should show `grab` (hand icon)

3. **Drag blocked:** Click and drag "Геодезическая разбивка площадки" — bar should NOT move. Click and drag "Разработка котлована" — bar should NOT move.

4. **Resize blocked:** Try to drag the left or right edge of a locked task — bar should NOT resize.

5. **Unlocked tasks work normally:** Drag "Ограждение и временные дороги" (task "2") — it should move normally with drag.

6. **Cascade skips locked:** Drag task "2" (Ограждение и временные дороги) left or right — task "4" (Разработка котлована, which is locked and an FS successor of "2") should NOT visually move during the drag preview.
  </how-to-verify>
  <resume-signal>Type "approved" if all 6 checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
After human approval:
- Locked task bars display padlock icon
- No drag/resize possible on locked tasks
- Cascade preview correctly skips locked tasks
- All unlocked tasks continue to function normally
</verification>

<success_criteria>
- Human confirms padlock icon visible on locked tasks
- Human confirms cursor is not-allowed on hover
- Human confirms drag and resize are completely blocked
- Human confirms unlocked tasks still drag normally
- Human confirms cascade preview does not move locked successor tasks
</success_criteria>

<output>
After completion, create `.planning/phases/11-lock-task/11-02-SUMMARY.md` with:
- Which tasks were made locked in the demo
- Human verification result (approved/issues found)
- Any bugs fixed during verification
</output>
